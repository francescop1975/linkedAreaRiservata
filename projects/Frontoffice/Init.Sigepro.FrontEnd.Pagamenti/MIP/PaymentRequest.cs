using System;

namespace Init.Sigepro.FrontEnd.Pagamenti.MIP
{
    using Init.Sigepro.FrontEnd.Infrastructure.UrlsAndPaths;
    using System.IO;
    using System.Runtime.Serialization;
    using System.Xml;
    using System.Xml.Serialization;

    //------------------------------------------------------------------------------
    // <auto-generated>
    //     Il codice è stato generato da uno strumento.
    //     Versione runtime:4.0.30319.42000
    //
    //     Le modifiche apportate a questo file possono provocare un comportamento non corretto e andranno perse se
    //     il codice viene rigenerato.
    // </auto-generated>
    //------------------------------------------------------------------------------


    // 
    // This source code was auto-generated by xsd, Version=4.0.30319.33440.
    // 


    /// <remarks/>
    [DataContract(Namespace = "")]
    public partial class PaymentRequest
    {
        private static class Constants
        {
            public const string Funzione = "PAGAMENTO";
            public const string NotificaEsitiNegativi = "S";
            public const string RitornaDatiSpecifici = "S";
            public const string ImportoCommissioni = "";
            public const string CalcoloCommissioni = "S";

            public const string TokenId = "";
        }

        IUrlEncoder _urlEncoder = new HttpUtilityUrlEncoder();
        IResolveUrl _resolveUrl = new HttpContextResolveUrl();
        [XmlIgnore]
        public IniziaPagamentoRequest PagamentoRequest { get; private set; }
        [XmlIgnore]
        public PagamentiSettings Settings { get; private set; }

        [Obsolete("Utilizzare solo per la serializzazione")]
        public PaymentRequest()
        {

        }

        public PaymentRequest(PagamentiSettings settings, IniziaPagamentoRequest request)
        {
            PagamentoRequest = request;
            Settings = settings;

            PortaleID = settings.IdPortale;
            EmailPortale = settings.EmailPortale;
            Funzione = Constants.Funzione;
            URLDiRitorno = PopolaUrlDiRitorno(settings, request);
            URLDiErrore = PopolaUrlDiErrore(settings, request);
            URLBack = PopolaUrlBack(settings, request);
            URLHome = PopolaUrlHome(settings, request);
            URLDiNotifica = PopolaUrlNotifica(settings, request);
            CommitNotifica = settings.CommitNotifica;
            NotificaEsitiNegativi = Constants.NotificaEsitiNegativi;
            RitornaDatiSpecifici = Constants.RitornaDatiSpecifici;
            PaymentData = new PaymentRequestPaymentData
            {
                NumeroOperazione = request.RiferimentiOperazione.NumeroOperazione,
                Valuta = request.RiferimentiOperazione.Valuta,
                Importo = request.RiferimentiOperazione.Importo,
                ImportoCommissioni = Constants.ImportoCommissioni,
                CalcoloCommissioni = Constants.CalcoloCommissioni
            };

            UserData = new PaymentRequestUserData
            {
                EmailUtente = request.RiferimentiUtente.Email,
                IdentificativoUtente = request.RiferimentiUtente.IdentificativoUtente,
                UserID = request.RiferimentiUtente.UserID,
                TokenID = Constants.TokenId
            };

            ServiceData = new PaymentRequestServiceData
            {
                IDServizio = settings.IDServizio
            };

        }

        private string PopolaUrlNotifica(PagamentiSettings settings, IniziaPagamentoRequest request)
        {
            return new UrlPagamenti(settings.UrlNotifica, request.RiferimentiDomanda, _urlEncoder, _resolveUrl).ToString();
        }

        private string PopolaUrlHome(PagamentiSettings settings, IniziaPagamentoRequest request)
        {
            return new UrlPagamenti(settings.UrlHome, request.RiferimentiDomanda, _urlEncoder, _resolveUrl).ToString();
        }

        private string PopolaUrlBack(PagamentiSettings settings, IniziaPagamentoRequest request)
        {
            return new UrlPagamenti(settings.UrlBack, request.RiferimentiDomanda, _urlEncoder, _resolveUrl).ToString();
        }

        private string PopolaUrlDiErrore(PagamentiSettings settings, IniziaPagamentoRequest request)
        {
            return new UrlPagamenti(settings.UrlErrore, request.RiferimentiDomanda, _urlEncoder, _resolveUrl).ToString();
        }

        private string PopolaUrlDiRitorno(PagamentiSettings settings, IniziaPagamentoRequest request)
        {
            return new UrlPagamenti(settings.UrlRitorno, request.RiferimentiDomanda, _urlEncoder, _resolveUrl).ToString();
        }

        /// <remarks/>
        [DataMember(Order = 10)]
        public string PortaleID
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember(Order = 20)]
        public string Funzione
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember(Order = 30)]
        public string URLDiRitorno
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember(Order = 40)]
        public string URLDiErrore
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember(Order = 50)]
        public string URLBack
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember(Order = 60)]
        public string URLHome
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember(Order = 70)]
        public string URLDiNotifica
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember(Order = 80)]
        public string CommitNotifica
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember(Order = 90)]
        public string EmailPortale
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember(Order = 100)]
        public string NotificaEsitiNegativi
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember(Order = 110)]
        public string RitornaDatiSpecifici
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember(Order = 120)]
        public PaymentRequestPaymentData PaymentData
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember(Order = 130)]
        public PaymentRequestUserData UserData
        {
            get;
            set;
        }

        [DataMember(Order = 140)]
        public UserDataExtType UserDataExt { get; set; }

        /// <remarks/>
        [DataMember(Order = 150)]
        public PaymentRequestServiceData ServiceData
        {
            get;
            set;
        }

        public virtual string ToXmlString()
        {
            var serializer = new DataContractSerializer(GetType());
            using (var output = new StringWriter())
            {
                using (var writer = new XmlTextWriter(output) { Formatting = Formatting.Indented })
                {
                    serializer.WriteObject(writer, this);
                    return output.GetStringBuilder().ToString();
                }
            }

        }
    }

    /// <remarks/>
    [DataContract(Namespace = "")]
    public partial class PaymentRequestPaymentData
    {

        /// <remarks/>
        [DataMember]
        public string NumeroOperazione
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember]
        public string Valuta
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember]
        public string Importo
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember]
        public string ImportoCommissioni
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember]
        public string CalcoloCommissioni
        {
            get;
            set;
        }
    }

    [DataContract(Namespace = "")]
    public partial class PaymentRequestUserData
    {
        /// <remarks/>
        [DataMember]
        public string EmailUtente
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember]
        public string IdentificativoUtente
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember]
        public string UserID
        {
            get;
            set;
        }

        /// <remarks/>
        [DataMember]
        public string TokenID
        {
            get;
            set;
        }
    }

    [DataContract(Namespace = "")]
    public partial class PaymentRequestServiceData
    {
        /// <remarks/>
        [DataMember(Order = 10)]
        public string IDServizio
        {
            get;
            set;
        }

        [DataMember(Order = 20)]
        public string NumeroDocumento { get; set; }

        [DataMember(Order = 30)]
        public string AnnoDocumento { get; set; }

        [DataMember(Order = 40)]
        public string DescrizioneDocumento { get; set; }
    }

    [DataContract(Namespace = "")]
    public class UserDataExtType
    {
        [DataMember(Order = 10)]
        public UtenteLoginType UtenteLogin { get; set; }

        [DataMember(Order = 20)]
        public UtenteType UtenteMandante { get; set; }
    }

    [DataContract(Namespace = "")]
    public class UtenteType
    {
        [DataMember(Order = 10)]
        public string TipoIdentificativo { get; set; } = "F";

        [DataMember(Order = 20)]
        public string IdentificativoUtente { get; set; }

        [DataMember(Order = 30)]
        public string Nome { get; set; }

        [DataMember(Order = 40)]
        public string Cognome { get; set; }
    }

    [DataContract(Namespace = "")]
    public class UtenteLoginType
    {
        [DataMember(Order = 2)]
        public string TipoAutenticazione { get; set; } = "USR";

        [DataMember(Order = 10)]
        public string TipoIdentificativo { get; set; } = "F";

        [DataMember(Order = 20)]
        public string IdentificativoUtente { get; set; }

        [DataMember(Order = 30)]
        public string Nome { get; set; }

        [DataMember(Order = 40)]
        public string Cognome { get; set; }
    }
}




//using System;
//using System.Collections.Generic;
//using System.Linq;
//using System.Text;
//using System.Threading.Tasks;

//namespace Init.Sigepro.FrontEnd.Pagamenti.MIP
//{
//    using Init.Sigepro.FrontEnd.Infrastructure.UrlsAndPaths;
//    using System.IO;
//    //------------------------------------------------------------------------------
//    // <auto-generated>
//    //     Il codice è stato generato da uno strumento.
//    //     Versione runtime:4.0.30319.42000
//    //
//    //     Le modifiche apportate a questo file possono provocare un comportamento non corretto e andranno perse se
//    //     il codice viene rigenerato.
//    // </auto-generated>
//    //------------------------------------------------------------------------------

//    using System.Xml.Serialization;

//    // 
//    // This source code was auto-generated by xsd, Version=4.0.30319.33440.
//    // 


//    /// <remarks/>
//    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.33440")]
//    [System.SerializableAttribute()]
//    [System.Diagnostics.DebuggerStepThroughAttribute()]
//    [System.ComponentModel.DesignerCategoryAttribute("code")]
//    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
//    [System.Xml.Serialization.XmlRootAttribute(Namespace = "", IsNullable = false)]
//    public partial class PaymentRequest
//    {
//        private static class Constants
//        {
//            public const string Funzione = "PAGAMENTO";
//            public const string NotificaEsitiNegativi = "S";
//            public const string RitornaDatiSpecifici = "S";
//            public const string ImportoCommissioni = "";
//            public const string CalcoloCommissioni = "S";

//            public const string TokenId = "";
//        }

//        IUrlEncoder _urlEncoder = new HttpContextUrlEncoder();
//        IResolveUrl _resolveUrl = new HttpContextResolveUrl();

//        [Obsolete("Utilizzare solo per la serializzazione")]
//        public PaymentRequest()
//        {

//        }

//        public PaymentRequest(PagamentiSettings settings, IniziaPagamentoRequest request)
//        {
//            this.PortaleID = settings.IdPortale;
//            this.Funzione = Constants.Funzione;
//            this.URLDiRitorno = PopolaUrlDiRitorno(settings, request);
//            this.URLDiErrore = PopolaUrlDiErrore(settings, request);
//            this.URLBack = PopolaUrlBack(settings, request);
//            this.URLHome = PopolaUrlHome(settings, request);
//            this.URLDiNotifica = PopolaUrlNotifica(settings, request);
//            this.CommitNotifica = settings.CommitNotifica;
//            this.NotificaEsitiNegativi = Constants.NotificaEsitiNegativi;
//            this.RitornaDatiSpecifici = Constants.RitornaDatiSpecifici;
//            this.PaymentData = new PaymentRequestPaymentData
//            {
//                NumeroOperazione = request.RiferimentiOperazione.NumeroOperazione,
//                Valuta = request.RiferimentiOperazione.Valuta,
//                Importo = request.RiferimentiOperazione.Importo,
//                ImportoCommissioni = Constants.ImportoCommissioni,
//                CalcoloCommissioni = Constants.CalcoloCommissioni
//            };

//            this.UserData = new PaymentRequestUserData
//            {
//                EmailUtente = request.RiferimentiUtente.Email,
//                IdentificativoUtente = request.RiferimentiUtente.IdentificativoUtente,
//                UserID = request.RiferimentiUtente.UserID,
//                TokenID = Constants.TokenId
//            };

//            this.ServiceData = new PaymentRequestServiceData
//            {
//                IDServizio = settings.IDServizio
//            };

//        }

//        private string PopolaUrlNotifica(PagamentiSettings settings, IniziaPagamentoRequest request)
//        {
//            return new UrlPagamentiMIP(settings.UrlNotifica, request.RiferimentiDomanda, this._urlEncoder, this._resolveUrl).ToString();
//        }

//        private string PopolaUrlHome(PagamentiSettings settings, IniziaPagamentoRequest request)
//        {
//            return new UrlPagamentiMIP(settings.UrlHome, request.RiferimentiDomanda, this._urlEncoder, this._resolveUrl).ToString();
//        }

//        private string PopolaUrlBack(PagamentiSettings settings, IniziaPagamentoRequest request)
//        {
//            return new UrlPagamentiMIP(settings.UrlBack, request.RiferimentiDomanda, this._urlEncoder, this._resolveUrl).ToString();
//        }

//        private string PopolaUrlDiErrore(PagamentiSettings settings, IniziaPagamentoRequest request)
//        {
//            return new UrlPagamentiMIP(settings.UrlErrore, request.RiferimentiDomanda, this._urlEncoder, this._resolveUrl).ToString();
//        }

//        private string PopolaUrlDiRitorno(PagamentiSettings settings, IniziaPagamentoRequest request)
//        {
//            return new UrlPagamentiMIP(settings.UrlRitorno, request.RiferimentiDomanda, this._urlEncoder, this._resolveUrl).ToString();
//        }
//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string PortaleID
//        {
//            get;
//            protected set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string Funzione
//        {
//            get;
//            protected set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string URLDiRitorno
//        {
//            get;
//            protected set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string URLDiErrore
//        {
//            get;
//            protected set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string URLBack
//        {
//            get;
//            protected set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string URLHome
//        {
//            get;
//            protected set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string URLDiNotifica
//        {
//            get;
//            protected set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string CommitNotifica
//        {
//            get;
//            protected set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string EmailPortale
//        {
//            get;
//            protected set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string NotificaEsitiNegativi
//        {
//            get;
//            protected set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string RitornaDatiSpecifici
//        {
//            get;
//            protected set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute("PaymentData", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public PaymentRequestPaymentData PaymentData
//        {
//            get;
//            protected set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute("UserData", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public PaymentRequestUserData UserData
//        {
//            get;
//            protected set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute("ServiceData", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public PaymentRequestServiceData ServiceData
//        {
//            get;
//            protected set;
//        }

//        internal string ToXmlString()
//        {
//            using (var stringwriter = new StringWriter())
//            {
//                var serializer = new XmlSerializer(this.GetType());
//                serializer.Serialize(stringwriter, this);
//                return stringwriter.ToString();
//            }
//        }
//    }

//    /// <remarks/>
//    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.33440")]
//    [System.SerializableAttribute()]
//    [System.Diagnostics.DebuggerStepThroughAttribute()]
//    [System.ComponentModel.DesignerCategoryAttribute("code")]
//    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
//    public partial class PaymentRequestPaymentData
//    {

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string NumeroOperazione
//        {
//            get;
//            set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string Valuta
//        {
//            get;
//            set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string Importo
//        {
//            get;
//            set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string ImportoCommissioni
//        {
//            get;
//            set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string CalcoloCommissioni
//        {
//            get;
//            set;
//        }
//    }

//    /// <remarks/>
//    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.33440")]
//    [System.SerializableAttribute()]
//    [System.Diagnostics.DebuggerStepThroughAttribute()]
//    [System.ComponentModel.DesignerCategoryAttribute("code")]
//    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
//    public partial class PaymentRequestUserData
//    {
//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string EmailUtente
//        {
//            get;
//            set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string IdentificativoUtente
//        {
//            get;
//            set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string UserID
//        {
//            get;
//            set;
//        }

//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string TokenID
//        {
//            get;
//            set;
//        }
//    }

//    /// <remarks/>
//    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.33440")]
//    [System.SerializableAttribute()]
//    [System.Diagnostics.DebuggerStepThroughAttribute()]
//    [System.ComponentModel.DesignerCategoryAttribute("code")]
//    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
//    public partial class PaymentRequestServiceData
//    {
//        /// <remarks/>
//        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
//        public string IDServizio
//        {
//            get;
//            set;
//        }
//    }
//}
